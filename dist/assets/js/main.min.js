function Page(e){this.nowPage=e.length-1,this.lastPage=e.length,this.pages=e,this.pagesHeight=e.height(),this.endposition=[0,0],this.stop=!0,this.move=!1}function Draw(){}var height=$(document).height();$(".page").css("height",height+"px"),$(".login").css("height",height+"px"),$(".pageList").css("height",height+"px"),Page.prototype.slidedown=function(e){var t=this;this.stop=!1,console.log(t),this.pages.eq(e).animate({top:"0px"},500,"ease-out",function(){draw.context(t.pages.eq(e).data("id"),function(e){e.stop=!0},t)})},Page.prototype.slideup=function(e){var t=this;this.stop=!1,console.log(t),this.pages.eq(e).animate({top:-this.pagesHeight},500,"ease-out",function(){draw.context(t.pages.eq(e-1).data("id"),function(e){e.stop=!0},t)})},Page.prototype.login=function(){$(".login").eq(0).animate({top:-height+"px"},500,"ease-in")},Page.prototype.bind=function(){console.log("bind ok!");var e=this;this.pages.on("touchstart",function(t){console.log("touch start!"),event.preventDefault(),(e.nowPage||0!==e.pages.eq(e.lastPage).length)&&e.stop&&isLogin&&(e.endposition=[],e.endposition.push(t.touches[0].pageX,t.touches[0].pageY))}).on("touchmove",function(t){var a=t.touches[0].pageY;console.log(1),e.move=!0,(e.nowPage||0!==e.pages.eq(e.lastPage).length)&&e.stop&&isLogin&&(a-e.endposition[1]<0&&e.nowPage?(e.moveDir="up",e.pages.eq(e.nowPage).css({top:parseFloat(e.pages.eq(e.nowPage).css("top"))+a-e.endposition[1]})):a-e.endposition[1]>0&&0!==e.pages.eq(e.lastPage).length&&(console.log(e.pages.eq(e.nowPage).css("top")),"0px"==e.pages.eq(e.nowPage).css("top")&&(e.moveDir="down",e.pages.eq(e.lastPage).css({top:parseFloat(e.pages.eq(e.lastPage).css("top"))+a-e.endposition[1]}))),e.endposition=[],e.endposition.push(t.touches[0].pageX,t.touches[0].pageY))}).on("touchend",function(t){console.log("end"),e.move&&isLogin&&(e.move=!1,0!==e.pages.eq(e.lastPage).length&&e.stop&&"down"==e.moveDir&&(-parseInt(e.pages.eq(e.lastPage).css("top"))>3*e.pagesHeight/4?e.slideup(e.lastPage):-parseInt(e.pages.eq(e.lastPage).css("top"))<3*e.pagesHeight/4&&(e.slidedown(e.lastPage),e.nowPage+=1,e.lastPage+=1)),e.nowPage&&e.stop&&"up"==e.moveDir&&(-parseInt(e.pages.eq(e.nowPage).css("top"))>e.pagesHeight/4?(e.slideup(e.nowPage),e.nowPage-=1,e.lastPage-=1):-parseInt(e.pages.eq(e.nowPage).css("top"))<e.pagesHeight/4&&e.slidedown(e.nowPage)))})},Draw.prototype.drawSex=function(e){require(["echarts","echarts/chart/pie"],function(t){var a=t.init(document.getElementById(e)),o={color:["#ffa634","#fee147","#c4df42","#eeb623"],title:{text:"你所在学院的男女比例为"+data.sex.male+" : "+data.sex.female,subtext:"脱单率"+Math.round(data.sex.fff/(data.sex.fff+data.sex.single)*1e4)/100+"% (仅作参考)",x:"center",textStyle:{color:"#d87e1d",fontSize:20}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"horizontal",x:"center",y:"bottom",data:["男生","女生","脱单","未脱单"]},toolbox:{show:!1},calculable:!1,series:[{name:"男女比例",type:"pie",selectedMode:"single",radius:[0,60],funnelAlign:"center",max:1548,itemStyle:{normal:{label:{position:"inner"},labelLine:{show:!1}}},data:[{value:parseInt(data.sex.male),name:"男生"},{value:parseInt(data.sex.female),name:"女生"}]},{name:"脱单比例",type:"pie",radius:[75,105],funnelAlign:"center",itemStyle:{normal:{label:{position:"outer"},labelLine:{show:!0,length:-5}}},data:[{value:parseInt(data.sex.fff),name:"脱单"},{value:parseInt(data.sex.single),name:"未脱单"}]}]};a.setOption(o)})},Draw.prototype.drawCome=function(e){require(["echarts","echarts/chart/pie"],function(t){var a=t.init(document.getElementById(e)),o={color:["#ffa634","#fee147","#c4df42","#eeb623"],title:{text:"新生中你的老乡比例为 "+Math.round(data.from.hometown/(data.from.hometown+data.from.others)*1e4)/100+"%",subtext:"其中男女比例为 "+data.from.male+" : "+data.from.female,x:"center",textStyle:{color:"#d87e1d",fontSize:20}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"horizontal",x:"center",y:"bottom",data:["你的老乡","其它省份","老乡男生","老乡女生"]},toolbox:{show:!1},calculable:!1,series:[{name:"老乡比例",type:"pie",selectedMode:"single",radius:[0,60],funnelAlign:"center",max:1548,itemStyle:{normal:{label:{position:"inner"},labelLine:{show:!1}}},data:[{value:parseInt(data.from.hometown),name:"你的老乡"},{value:parseInt(data.from.others),name:"其它省份"}]},{name:"老乡男女比例",type:"pie",radius:[75,105],funnelAlign:"center",itemStyle:{normal:{label:{position:"outer"},labelLine:{show:!0,length:-5}}},data:[{value:parseInt(data.from.male),name:"老乡男生"},{value:parseInt(data.from.female),name:"老乡女生"}]}]};a.setOption(o)})},Draw.prototype.drawSame=function(e){require(["echarts","echarts/chart/pie"],function(t){var a=t.init(document.getElementById(e)),o={color:["#ffa634","#fee147","#c4df42","#eeb623"],title:{text:"新生中和你同年同月的比例为"+Math.round(data.same.samemon/(data.same.samemon+data.same.others)*1e4)/100+"%",subtext:"",x:"center",textStyle:{color:"#d87e1d",fontSize:20}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"horizontal",x:"center",y:"bottom",data:["同年同月","其它"]},series:[{name:"毕业去向",type:"pie",radius:"55%",center:["50%","50%"],itemStyle:{normal:{label:{position:"outer"},labelLine:{show:!0}}},data:[{value:parseInt(data.same.samemon),name:"同年同月"},{value:parseInt(data.same.others),name:"其它"}]}]};a.setOption(o)})},Draw.prototype.drawHard=function(e){require(["echarts","echarts/chart/pie"],function(t){var a=t.init(document.getElementById(e)),o={color:["#ffa634","#fee147","#c4df42","#eeb623"],title:{text:"你所在学院学生心目中大一最难的科目",subtext:"本数据由红岩网校工作站统计，仅作参考",x:"center",textStyle:{color:"#d87e1d",fontSize:20}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"horizontal",x:"center",y:"bottom",data:[]},series:[{name:"最难科目",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:hard[data.college].n1k,name:hard[data.college].n1},{value:hard[data.college].n2k,name:hard[data.college].n2},{value:hard[data.college].n3k,name:hard[data.college].n3}]}]};a.setOption(o)})},Draw.prototype.drawFuture=function(e){require(["echarts","echarts/chart/pie"],function(t){var a=t.init(document.getElementById(e)),o={color:["#ffa634","#fee147","#c4df42","#eeb623"],title:{text:"你所在学院2015年毕业生毕业去向",subtext:"本数据由红岩网校工作站统计，仅作参考",x:"center",textStyle:{color:"#d87e1d",fontSize:20}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"horizontal",x:"center",y:"bottom",data:["签约就业","升学出国","待就业","灵活就业"]},series:[{name:"毕业去向",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:future[data.college].jy,name:"签约就业"},{value:future[data.college].sx,name:"升学出国"},{value:future[data.college].djy,name:"待就业"},{value:future[data.college].lh,name:"灵活就业"}]}]};a.setOption(o)})},Draw.prototype.drawAll=function(e,t,a){for(var o=0;o<e.length;o++)this[e[o]](e[o]);t&&(console.log("11"),a&&(console.log("22"),t(a)))},Draw.prototype.context=function(e,t,a){e&&this[e](e),t&&(console.log("11"),a&&(console.log("22"),t(a)))};var page=new Page($(".page"));page.bind();var draw=new Draw;