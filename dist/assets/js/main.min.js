function Page(e){this.nowPage=e.length-1,this.lastPage=e.length,this.pages=e,this.pagesHeight=e.height(),this.startposition=[0,0],this.endposition=[0,0],this.stop=!0}Page.prototype.slidedown=function(e){var s=this;this.pages.eq(e).animate({top:"0px"},500,"ease-out",function(){s.stop=!0})},Page.prototype.slideup=function(e){var s=this;this.pages.eq(e).animate({top:-this.pagesHeight},500,"ease-out",function(){s.stop=!0})},Page.prototype.bind=function(){var e=this;this.pages.on("touchstart",function(s){(e.nowPage||0!=e.pages.eq(e.lastPage).length)&&(e.endposition=[],e.endposition.push(s.touches[0].pageX,s.touches[0].pageY))}).on("touchmove",function(s){if(e.nowPage||0!=e.pages.eq(e.lastPage).length){var t=(s.touches[0].pageX,s.touches[0].pageY);console.log(t-e.endposition[1]),t-e.endposition[1]<0&&e.nowPage?(e.moveDir="up",e.pages.eq(e.nowPage).css({top:parseFloat(e.pages.eq(e.nowPage).css("top"))+t-e.endposition[1]})):t-e.endposition[1]>0&&0!=e.pages.eq(e.lastPage).length&&(e.moveDir="down",e.pages.eq(e.lastPage).css({top:parseFloat(e.pages.eq(e.lastPage).css("top"))+t-e.endposition[1]})),e.endposition=[],e.endposition.push(s.touches[0].pageX,s.touches[0].pageY)}}).on("touchend",function(s){console.log(e.moveDir),0!=e.pages.eq(e.lastPage).length&&e.stop&&"down"==e.moveDir&&(e.stop=!1,-parseInt(e.pages.eq(e.lastPage).css("top"))>3*e.pagesHeight/4?e.slideup(e.lastPage):-parseInt(e.pages.eq(e.lastPage).css("top"))<3*e.pagesHeight/4&&(e.slidedown(e.lastPage),e.nowPage+=1,e.lastPage+=1)),e.nowPage&&e.stop&&"up"==e.moveDir&&(e.stop=!1,-parseInt(e.pages.eq(e.nowPage).css("top"))>e.pagesHeight/4?(e.slideup(e.nowPage),e.nowPage-=1,e.lastPage-=1):-parseInt(e.pages.eq(e.nowPage).css("top"))<e.pagesHeight/4&&e.slidedown(e.nowPage))})};var page=new Page($(".page"));page.bind();